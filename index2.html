<!doctype html>
<html class="no-js" lang="">
<head>
    <title>Date</title>

    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Place favicon.ico in the root directory -->



    <!-- Parse Javascript Library -->
    <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.3.5.min.js"></script>


<style type="text/css">
        body, html {
            height: 100%;
            width: 100%;
        }

        #map-canvas {
            height: 75%;
            width: 75%;
            margin: auto;
            padding: 0px;
        }
    </style>
    <!-- Googele Maps API with auth key and Google Places library -->
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSUePcmFpi7VdwNfaFXkNc0zo2hO9N9Mk&libraries=places,geometry">
    </script>
    <script>
        var gmap;
        var focus;
        var service;
        var infowindow;

        function initialize() {
            focus = new google.maps.LatLng(47.616831, -122.329461);
            var mapOptions = {
                zoom: 15,
                center: focus
            };
            gmap = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
            infowindow = new google.maps.InfoWindow();
            service = new google.maps.places.PlacesService(gmap);
            search("keyword", 'pizza', 1000);
        }
        google.maps.event.addDomListener(window, 'load', initialize);


        function search(method, arg, meters) {
            var request;
            switch (method) {
                case "near":
                    request = {
                        location: focus,
                        radius: meters,
                        types: arg
                    };
                    service.nearbySearch(request, callback);
                    break;
                case "keyword":
                    request = {
                        location: focus,
                        radius: meters,
                        query: arg,
                    };
                    service.textSearch(request, callback);
                    break;
                case "radar":
                    request = {
                        bounds: gmap.getBounds(),
                        keyword: arg
                    }
                    service.radarSearch(request, callback);
                    break;
                default:
                    break;
            }
        }

        function callback(results, status) {
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                }
            }
        }

        function createMarker(place) {
            var marker = new google.maps.Marker({
                map: gmap,
                position: place.geometry.location
            });

            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(place.name + " - " + place.formatted_address);
                infowindow.open(gmap, this);
            });
        }
    </script>
</head>


<body>

    <div id="map-canvas"></div>

    <!-- Our JS files -->
    <script src="DateInfo.js"></script>
    <script src="parseUtils.js"></script>

</body>
</html>
<!--
var map;
var infowindow;

function initialize() {
  var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);

  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: pyrmont,
    zoom: 15
  });

  var request = {
    location: pyrmont,
    radius: 500,
    types: ['store']
  };
  infowindow = new google.maps.InfoWindow();
  var service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      createMarker(results[i]);
    }
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(place.name);
    infowindow.open(map, this);
  });
}

google.maps.event.addDomListener(window, 'load', initialize);

        function search(method, arg, meters) {
            var request;
            switch (method) {
                case "near":
                    request = {
                        location: focus,
                        radius: meters,
                        types: arg
                    };
                    service.nearbySearch(request, callback);
                    break;
                case "keyword":
                    request = {
                        location: focus,
                        radius: meters,
                        query: arg,
                    };
                    service.textSearch(request, callback);
                    break;
                case "radar":
                    request = {
                        bounds: gmap.getBounds(),
                        keyword: arg
                    }
                    service.radarSearch(request, callback);
                    break;
                default:
                    break;
            }
        }

        function callback(results, status) {
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                }
            }
        }

        function createMarker(place) {
            var marker = new google.maps.Marker({
                map: gmap,
                position: place.geometry.location
            });

            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(place.name + " - " + place.formatted_address);
                infowindow.open(gmap, this);
            });
        }
    </script>
</head>


<body>

    <div id="map-canvas"></div>

    <!-- Our JS files -->
    <script src="DateInfo.js"></script>
    <script src="parseUtils.js"></script>

</body>
</html>

